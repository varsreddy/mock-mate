!function(t,e){var o="click_id",r="__tr_clid",n="tr_utm_camp",a="__tr_utms",c="__tr_utmd",i="__tr_isnu",u="__tr_db",s="__tr_jr",p="__tr_luptv",l="session_store",m=function(){try{let e=t.location.hostname.split(".");return e.length>2?e.slice(-2).join("."):t.location.hostname}catch(e){return t.location&&t.location.hostname?t.location.hostname:""}}(),f=function(){"use strict";var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{encode:function(e){var o,r,n,a,c,i,u,s="",p=0;for(e=function(t){var e,o,r="";for(t=t.replace(/\r\n/g,"\n"),o=0;o<t.length;o++)(e=t.charCodeAt(o))<128?r+=String.fromCharCode(e):e>127&&e<2048?(r+=String.fromCharCode(e>>6|192),r+=String.fromCharCode(63&e|128)):(r+=String.fromCharCode(e>>12|224),r+=String.fromCharCode(e>>6&63|128),r+=String.fromCharCode(63&e|128));return r}(e);p<e.length;)a=(o=e.charCodeAt(p++))>>2,c=(3&o)<<4|(r=e.charCodeAt(p++))>>4,i=(15&r)<<2|(n=e.charCodeAt(p++))>>6,u=63&n,isNaN(r)?i=u=64:isNaN(n)&&(u=64),s+=t.charAt(a),s+=t.charAt(c),s+=t.charAt(i),s+=t.charAt(u);return s},decode:function(e){var o,r,n,a,c,i,u="",s=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");s<e.length;)o=t.indexOf(e.charAt(s++))<<2|(a=t.indexOf(e.charAt(s++)))>>4,r=(15&a)<<4|(c=t.indexOf(e.charAt(s++)))>>2,n=(3&c)<<6|(i=t.indexOf(e.charAt(s++))),u+=String.fromCharCode(o),64!==c&&(u+=String.fromCharCode(r)),64!==i&&(u+=String.fromCharCode(n));return function(t){for(var e="",o=0,r=0,n=0,a=0;o<t.length;)(r=t.charCodeAt(o))<128?(e+=String.fromCharCode(r),o++):r>191&&r<224?(n=t.charCodeAt(o+1),e+=String.fromCharCode((31&r)<<6|63&n),o+=2):(n=t.charCodeAt(o+1),a=t.charCodeAt(o+2),e+=String.fromCharCode((15&r)<<12|(63&n)<<6|63&a),o+=3);return e}(u)}}}();function d(t,e){return"string"!=typeof t&&(t=String(t)),("number"!=typeof e||e<0)&&(e=100),t.length<=e?t:t.slice(0,e)}function h(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(location.search);return null===e?"":decodeURIComponent(e[1].replace(/\+/g," "))}function g(){return t.localStorage?t.localStorage.getItem(u)==l:y(u)==l}function _(e){if(g())return t.sessionStorage?t.sessionStorage.getItem(e):"";var o=y(e);return!o&&t.localStorage&&(o=t.localStorage.getItem(e)),o}function y(t){var o=e.cookie.split("; "),r=null;return o.forEach(function(e){if(0===e.indexOf(t+"="))return r=e.split("=")[1],!1}),r}function v(t){var e=[];["sub1","sub2","sub3","sub4","sub5","sub6","sub7","sub8","sub9","sub10","sub11","sub12","sub13","sub14","sub15","user_id","txn_id","goal_value","goal_id","status","coupon_code","currency","product_id","product_sku","product_quantity","is_new_user","store_name","season","order_date","shopify_shop_id"].forEach(function(o){var r=t&&t[o]||"";(r&&"string"==typeof r||r&&"number"==typeof r)&&e.push(o+"="+encodeURIComponent(r))});var o={};o[a]="utms",o[c]="utmd",o[n]="utmc",o[s]="j",[a,c,n,s].forEach(function(t){var r=_(t);r&&"string"==typeof r&&e.push(o[t]+"="+encodeURIComponent(r))});var r=t?t.sale_amount:null;if("string"==typeof r){r=r.replace(/,/g,"");var i=Number(r);isNaN(i)||e.push("sale_amount="+i)}else"number"==typeof r&&e.push("sale_amount="+r);return e.push("__v=6.2"),e.push("s=websdk"),e}function S(t){return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()}function b(e,o,r,n){t.Sentry.captureException(e,function(e){return e.clear(),o&&e.setExtra("tdomain",o),r&&e.setExtra("token",r),n&&e.setExtra("opts",JSON.stringify(n)),e.setExtra("href",t.location.href),e.setExtra("user_agent",navigator.userAgent),e})}function k(o,r,n,a){if(t.Sentry)t.Sentry&&"6.19.7"==t.Sentry.SDK_VERSION&&b(o,r,n,a);else{var c=e.createElement("script");c.onload=function(){t.Sentry.init({dsn:"https://6e98a7359b29fa1e566c00f891e415c9@o156739.ingest.sentry.io/4506630567100416",defaultIntegrations:!1}),b(o,r,n,a)},c.src="https://browser.sentry-cdn.com/6.19.7/bundle.min.js",e.body.appendChild(c)}}function C(t,e,o){if(o.debug||"kama.gotrackier.com"==t||"koskii.gotrackier.com"==t||"neemans17.gotrackier.com"==t){var r=v(o).join("&"),n=R(),a=o&&o.is_camp;fetch("https://logs.cloudstuff.tech/?"+(a?"adid":"av")+"="+e+"&"+r+"&click_id="+n).then(function(t){}).catch(function(r){console.log("[log.ERROR TrackierWebSDK] Additional logging failed"),k(r,t,e,o)})}}function I(o,r,n){var a=n&&n.is_iframe||n&&n.isIframe?"iframe":"image",c=n&&n.order_date||"";if(!c&&t.Shopify&&t.Shopify.checkout&&(c=t.Shopify.checkout.updated_at||t.Shopify.checkout.created_at),c&&n&&(n.order_date=c,!function(t){try{var e=new Date(t);if(!e.toJSON())return!0;var o=new Date;return S(o)==S(e)&&(o.getTime()-e.getTime())/1e3<86400}catch(t){return!0}}(c)))console.log("[log.INFO TrackierWebSDK] Skip order tracking as it is not of current date");else{var i=v(n).join("&"),u=R(),s="https://"+o+"/pixel?"+(n&&n.is_camp?"adid":"av")+"="+r+"&"+i+"&click_id="+u;if("iframe"==a){var p=e.createElement("iframe");p.setAttribute("src",s),p.style.display="none",e.body.appendChild(p)}else{(new Image).src=s}}}function x(t,e,o){try{I(t,e,o)}catch(r){o&&o.capture_error&&k(r,t,e,o)}}function w(){var t=new Date;O(p,t.getTime())}function T(s,p){var f,d,g,_=h("utm_source");if(f=e.referrer,d=h("gclid"),g=h("fbclid"),(/^https:\/\/www\.google\./.test(f)||"https://www.google.com/"==f||"https://www.bing.com/"==f||"https://search.yahoo.com/"==f||"https://in.search.yahoo.com/"==f||/search\.yahoo\.com/.test(f)||"string"==typeof d&&d.length>10||"string"==typeof g&&g.length>10)&&!_)return e.cookie=o+"=;path=/;expires=Thu, 01 Jan 1970 00:00:00 GMT;domain="+m,e.cookie=r+"=;path=/;expires=Thu, 01 Jan 1970 00:00:00 GMT;domain="+m,e.cookie=n+"=;path=/;expires=Thu, 01 Jan 1970 00:00:00 GMT;domain="+m,e.cookie=a+"=;path=/;expires=Thu, 01 Jan 1970 00:00:00 GMT;domain="+m,e.cookie=c+"=;path=/;expires=Thu, 01 Jan 1970 00:00:00 GMT;domain="+m,e.cookie=i+"=;path=/;expires=Thu, 01 Jan 1970 00:00:00 GMT;domain="+m,t.sessionStorage&&(t.sessionStorage.removeItem(o),t.sessionStorage.removeItem(r),t.sessionStorage.removeItem(n),t.sessionStorage.removeItem(a),t.sessionStorage.removeItem(c),t.sessionStorage.removeItem(i)),t.localStorage&&(t.localStorage.removeItem(o),t.localStorage.removeItem(r),t.localStorage.removeItem(n),t.localStorage.removeItem(a),t.localStorage.removeItem(c),t.localStorage.removeItem(i)),E("organic"),void w();t.localStorage&&(s==l?t.localStorage.setItem(u,l):t.localStorage.setItem(u,"ck")),N(h("click_id"),h("utm_campaign"),p)}function A(e){var o=JSON.stringify(e);t.btoa?O(s,t.btoa(o)):O(s,f.encode(o))}function D(e,o){try{var r=function(e){var o,r;o=t.atob?t.atob(e):f.decode(e);try{(r=JSON.parse(o))||(r=[])}catch(t){r=[]}return r}(o),n=r[r.length-1]||{};return n.utms!=e.utms||e.utmc&&e.utmc!=n.utmc?(r.length>=5&&r.shift(),r.push(e),A(r),!0):(n.ts=e.ts,n.utmd=e.utmd,n.utmc=e.utmc,r[r.length-1]=n,A(r),!0)}catch(t){k(t)}return!1}function E(t){if(!t)return!1;var e=function(t){var e=new Date,o={utms:d(t||h("utm_source")),ts:e.toJSON()},r=h("utm_campaign");r&&(o.utmc=d(r));var n=h("utm_medium");return n&&(o.utmd=d(n)),o.enc="yes",["utms","utmc","utmd"].forEach(function(t){o[t]&&(o[t]=encodeURIComponent(o[t]))}),o}(t),o=_(s);return o?D(e,o):(A([e]),!0)}function N(t,e,o){var i=h("utm_source"),u=_(a);(function(){try{var t=_(p);if(t&&!Number.isNaN(Number(t)))return((new Date).getTime()-Number(t))/1e3>20}catch(t){}return!0})()&&(i&&u!=i&&!e&&(e="__EMPTY__"),E(i)&&o&&o.cf_prb&&function(t){if(t&&t.tdomain){var e=h("click_id")||R(),o="https://"+t.tdomain+"/prbcl?click_id="+e+"&j="+_(s);fetch(o).then(function(t){}).catch(function(t){})}}(o),O(r,t),O(n,e),O(a,i),O(c,h("utm_medium")),w())}function O(o,r){if(g())t.sessionStorage&&r&&t.sessionStorage.setItem(o,r);else if(function(t,o){var r=new Date;r.setTime(r.getTime()+31536e6),o&&(e.cookie=t+"="+o+";path=/;expires="+r.toUTCString()+";domain="+m)}(o,r),t.localStorage&&r)try{t.localStorage.setItem(o,r)}catch(t){}}function R(){var t=_(r);return t||(_(o)||"")}function j(t,o){if(t){var r=e.createElement("script"),n=function(t){var e=[];return Object.keys(t).forEach(function(o){e.push(o+"="+encodeURIComponent(t[o]))}),e}(o),a=t+"?"+n.join("&");r.setAttribute("src",a),r.setAttribute("type","text/javascript"),r.setAttribute("async",!0),e.body.appendChild(r)}else console.log("[log.ERROR TrackierWebSDK] All required parameters (url) must be provided")}var J=function(){var o=null;function r(){}return r.prototype.init=function(t,e){T(t,e)},r.prototype.integrateGTMShopify=function(){if(!t.Shopify||!t.Shopify.analytics)return!1;var e=0,o=!1;setInterval(function(){if(o)return!1;if(t.dataLayer&&t.dataLayer.length>e){for(var r=e;r<t.dataLayer.length&&!o;r++){var n=t.dataLayer[r];"order-placed"===n.event&&(t.Shopify.analytics.publish("tr_shiprocket_purchase_event",n||{}),o=!0)}e=t.dataLayer.length}},200)},r.prototype.integrateGTMShopifyWithEventName=function(e=null){if(!t.Shopify||!t.Shopify.analytics||!e)return!1;let o=0,r=!1;setInterval(function(){if(r)return!1;if(t.dataLayer&&t.dataLayer.length>o){for(let n=o;n<t.dataLayer.length&&!r;n++){let o=t.dataLayer[n];if(o[1]&&o[1]===e){const e=o[2]||{};t.Shopify.analytics.publish("tr_custom_purchase_event",e),r=!0}}o=t.dataLayer.length}},200)},r.prototype.setClickPixelCb=function(t){t&&"function"==typeof t&&(o=t)},r.prototype.clickPixelCb=function(t){try{o&&"function"==typeof o&&o(t.click_id)}catch(t){}N(t.click_id,h("utm_campaign")||"trackier_",{})},r.prototype.hasSessionId=function(){var t=R();return t&&"string"==typeof t&&24===t.length},r.prototype.getTrackingToken=function(){return R()||""},r.prototype.getVersion=function(){return"6.2"},r.prototype.setIsNewUser=function(t){O(i,!0===t?"true":"false")},r.prototype.getShopifyCheckoutData=function(t,e){var o={};if("gokwik"==e)o={txn_id:t.customData.order_name,sale_amount:t.customData.total_price,sub1:t.customData.moid,sub10:"gokwik"},/^tmp_/.test(o.sub1)&&(o.sub1=""),t.customData.discount&&t.customData.discount.title&&(o.coupon_code=t.customData.discount.title);else if("shiprocket"==e){o={txn_id:(r=t.customData||{}).ecommerce?r.ecommerce.transaction_id:"",sale_amount:r.ecommerce&&r.ecommerce.value?r.ecommerce.value:0,sub10:"shiprocket"},r.ecommerce&&r.ecommerce.coupon&&(o.coupon_code=r.ecommerce.coupon)}else if("shiprocket_v2"==e){o={txn_id:(r=t.customData||{}).transaction_id||"",sale_amount:r.value||0,sub10:"shiprocket"},r.coupon&&(o.coupon_code=r.coupon)}else if("custom"==e){var r;o={txn_id:(r=t.customData||{}).transaction_id||"",sale_amount:r.value||0,currency:r.currency||"",coupon_code:r.coupon||"",sub10:"custom"}}else o=this.getShopifyCheckoutEventData(t);return o},r.prototype.getShopifyCheckoutEventData=function(t){var e=t.data.checkout,o=e.order.id,r=e.totalPrice.amount,n=[],a=e.discountApplications;return a&&a.constructor===Array&&a.length>0&&a.forEach(function(t){!t||"discount_code"!==t.type&&"DISCOUNT_CODE"!=t.type&&"CODE"!=t.type&&"code"!=t.type||n.push(t.title)}),{sale_amount:r,txn_id:o,coupon_code:n[0]}},r.prototype.isNewUser=function(t){return"true"==_(i)},r.prototype.trackClick=function(t,o){!function(t){var o=e.createElement("script"),r=h("campaign_id"),n=h("pub_id"),a=h("fbclid"),c=h("gclid");if(r&&n){var i="https://"+t+"/click_pixel?campaign_id="+r+"&pub_id="+n;a&&(i+="&fbclid="+a),c&&(i+="&gclid="+c),["p1","p2","p3","p4","p5","p6","p7","p8","p9","p10","p11","p12","p13","p14","p15","source"].forEach(function(t){var e=h(t);e&&"string"==typeof e&&(i+="&"+t+"="+encodeURIComponent(e))}),i+="&callback=window.TrackierWebSDK.clickPixelCb",o.setAttribute("src",i),o.setAttribute("type","text/javascript"),o.setAttribute("async",!0),e.body.appendChild(o)}else T("")}(t)},r.prototype.trackConv=function(t,e,o){x(t,e,o),C(t,e,o)},r.prototype.trackConvForBrand=function(t,e,o){var r;(r=_(n)||"",/^trackier_/i.test(r))?(x(t,e,o),C(t,e,o)):C(t,e,o)},r.prototype.getUrlParam=function(t){return h(t)},r.prototype.sendPin=function(t,e){return j(t,e)},r}();t.TrackierWebSDK=new J}(window,window.document);
